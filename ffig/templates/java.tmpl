{% import 'java.macros' as java_macros %}
// This code was generated by FFIG <http://ffig.org>.
// Manual edits will be lost.

package {{module.name}};

import com.sun.jna.Library;
import com.sun.jna.Native;
import com.sun.jna.Pointer;
import com.sun.jna.ptr.PointerByReference;
import com.sun.jna.ptr.DoubleByReference;
import com.sun.jna.ptr.IntByReference;

public class {{class.name}} {
    protected Pointer ptr = Pointer.NULL;

    protected void finalize() {
      {{module.name}}CLibrary.INSTANCE.{{module.name}}_{{class.name}}_dispose(ptr);
    }

    protected {{class.name}}()
    {
    }
    
    protected {{class.name}}(Pointer ptr)
    {
      this.ptr = ptr;
    }
    {% if not class.is_abstract %}
    {% for method in class.constructors %}
   
    public {{class.name}}({{java_macros.method_parameters(method)}}) {
      PointerByReference rv = new PointerByReference();
      int rc = {{module.name}}CLibrary.INSTANCE.{{module.name}}_{{class.name}}_create({{java_macros.method_arguments(method, trailing_comma=True)}}rv);
      if(rc != 0) {
        throw new {{module.name}}Exception();
      }
      this.ptr = rv.getValue();
    }
    {% endfor %}
    {% endif %}
{% for method in class.methods %}

    {% if method.returns_void %}
    public void {{method.name}}({{java_macros.method_parameters(method)}}) {
      int rc = {{module.name}}CLibrary.INSTANCE.{{module.name}}_{{class.name}}_{{method.name}}(ptr, {{java_macros.method_arguments(method)}});
      if(rc != 0) {
        throw new {{module.name}}Exception();
      }
    }
    {% else %}
    public {{method.return_type|to_java_return_type}} {{method.name}}({{java_macros.method_parameters(method)}}) {
      {{method.return_type|to_java_output_value("rv")}};
      int rc = {{module.name}}CLibrary.INSTANCE.{{module.name}}_{{class.name}}_{{method.name}}(ptr, {{java_macros.method_arguments(method, trailing_comma=True)}}rv);
      if(rc != 0) {
        throw new {{module.name}}Exception();
      }
      {% if method.returns_nullable %}
      if(rv.getValue() == Pointer.NULL) {
        return null;
      }
      {% endif %}
      return {{method.return_type|to_java_return_value("rv")}};
    }
    {% endif %}
{% endfor %}
}
