image:
- Visual Studio 2017
- Ubuntu

install:
  - git submodule update --init
  - cmd: set PATH="C:\Program Files\LLVM\bin";C:\mingw-w64\i686-5.3.0-posix-dwarf-rt_v4-rev0\mingw32\bin;%PATH%
  - cmd: C:\Python36-x64\python -m pip install jinja2 nose pycodestyle
  - sh: sudo apt-get install -y python-software-properties software-properties-common
  - sh: sudo add-apt-repository ppa:openjdk-r/ppa; apt update; apt install -y openjdk-8-jdk
  - sh: sudo apt-get install -y libclang-dev luajit ninja-build cmake ruby ruby-dev
  - sh: gem install ffi
  - sh: export LD_LIBRARY_PATH=/usr/lib/llvm-3.8/lib:$LD_LIBRARY_PATH
  - sh: python -m pip install --user jinja2 nose pycodestyle
  
build_script:
  - cmd: python scripts\build.py -t --python-path "C:\\Python36-x64\\python"
  - sh: python scripts/build.py -t 

